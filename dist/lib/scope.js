"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(e,t){function n(e){if(t.HTMLElement||t.Element){var n=t.HTMLElement?t.HTMLElement:t.Element;return e instanceof n}return"object"===("undefined"==typeof e?"undefined":_typeof(e))&&1===e.nodeType&&"object"===_typeof(e.style)&&"object"===_typeof(e.ownerDocument)}function r(e){if("function"!=typeof e.render)throw new TypeError("Render function not defined!");this.context=e}function o(e,t,n,r,o){var f=this;f.tagName=e,f.props=t,f.children=n,f.events=r,f.ref=o}function f(e,t,n,o,f,i){var a=this;a.$ele=e,f&&!i&&(a.refs=f.refs),a.updateProps=function(){e.attr(t.props)},a.update=function(){var i={list:[]},a=function(t,n,r){-1==u.indexOf(t.tagName)&&!function(){var o={},f=l(t.children,r,o,i,!0);e.empty(),f.forEach(function(t){"string"==typeof t?e.text(e.text()+t):e.append(t)}),Object.keys(n).forEach(function(e){o[e]?n[e]=o[e]:o[e]=n[e]})}()};if("string"==typeof t.tagName){a(t,o,n);for(var c=i.list.length-1;c>=0;c--)i.list[c]()}else if(t.tagName instanceof r){a(f.element,f.refs,f.context);for(var p=i.list.length-1;p>=0;p--)i.list[p]();"function"==typeof f.context.afterUpdate&&f.context.afterUpdate.bind(f.context)(f)}}}function i(e,t,n){var r=this;r.refs=e,r.owner=t,r.$ele=n}var a=".scope",c=function(e){return e.replace(/[<>&"]/g,function(e){return{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"}[e]})},u="br hr img map area base input".split(" "),p=i.prototype;p.getTarget=function(e){return e=e||t.event,e.target?e.target:e.srcElement},p.preventDefault=function(e){e=e||t.event,e.preventDefault?e.preventDefault():e.returnValue=!1},p.stopPropagation=function(e){e=e||t.event,e.stopPropagation?e.stopPropagation():e.cancelBubble=!0};var s=function(t,n,r,o){Object.keys(t.events).forEach(function(c){var u=t.events[c],p=new f(n,t,r,o);"function"==typeof u?n.on(c+a,function(e){u.bind(r)(new i(o,p,n),e)}):"object"==("undefined"==typeof u?"undefined":_typeof(u))&&Object.keys(u).forEach(function(t){n.on(c+a,t,function(n){u[t].bind(r)(new i(o,p,e(this)),n)})})})},l=function v(t,n,i,a,c){var p=[];return t.forEach(function(t){if(!t)return!1;if("function"==typeof t&&(t=t.bind(n)()),Array.isArray(t))return Array.prototype.push.apply(p,v(t,n,i,a,c)),!0;if("object"!=("undefined"==typeof t?"undefined":_typeof(t)))return p.push(""+t),!0;if(!(t instanceof o))return!1;if("string"==typeof t.tagName)!function(){var r=e(document.createElement(t.tagName));if(t.props&&r.attr(t.props),s(t,r,n,i),t.ref&&(i[t.ref]=new f(r,t,n,i)),-1==u.indexOf(t.tagName)){var o=v(t.children,n,i,a,c);o.forEach(function(e){"string"==typeof e?r.text(r.text()+e):r.append(e)})}p.push(r)}();else{if(!(t.tagName instanceof r))return!1;var l=y(t.tagName,t.props,a,n,t,c);t.ref&&(i[t.ref]=new f(l.$ele,t,n,i,l)),p.push(l.$ele)}}),p},y=function(t,n,r,i,a,c){var u=e.extend({},t.context,{props:e.extend({},n)});Object.keys(u.props).forEach(function(e){"function"==typeof u.props[e]&&(u.props[e]=u.props[e].bind(i))}),"function"==typeof u.beforeMount&&u.beforeMount.bind(u)();var p=u.render.bind(u)();if(null==p)return null;if(!(p instanceof o))return null;var y={},d=e(document.createElement(p.tagName));p.props&&d.attr(p.props),s(p,d,u,y);var v=l(p.children,u,y,r);v.forEach(function(e){"string"==typeof e?d.text(d.text()+e):d.append(e)});var m={$ele:d,refs:y,element:p,context:u,callbacks:r};return c?"function"==typeof u.afterUpdate&&r&&Array.isArray(r.list)&&r.list.push(u.afterUpdate.bind(u,m)):"function"==typeof u.afterMount&&r&&Array.isArray(r.list)&&r.list.push(u.afterMount.bind(u,m)),p.ref&&(m.refs[p.ref]=new f(m.$ele,a,i,m.refs,m,!0)),m},d={createClass:function(e){return new r(e)},createElement:function(){var e=Array.prototype.slice.call(arguments,0),t=e.splice(0,2),n=t[0],f=t[1],i=e,a={},u={},p=null;return f&&("string"==typeof n?Object.keys(f).forEach(function(e){var t=""+e,n=f[e];"ref"==t?p=c(""+n):t.startsWith("on")?!n||"function"!=typeof n&&"object"!=("undefined"==typeof n?"undefined":_typeof(n))||(u[t.replace(/^on/,"").toLowerCase()]=n):a[t]=n}):n instanceof r&&Object.keys(f).forEach(function(e){var t=""+e,n=f[e];"ref"==t?p=c(""+n):a[t]=n})),new o(n,a,i,u,p)},render:function(i,a,c){if(!(i instanceof o))throw new TypeError("Render function should return element!");if(!a instanceof t.jQuery&&!n(a))throw new TypeError("Render function should receive a DOM!");if(n(a)&&(a=e(a)),i.tagName instanceof r){var u={list:[]},p=y(i.tagName,i.props,u,c,i);a.empty().append(p.$ele);for(var s=u.list.length-1;s>=0;s--)u.list[s]();return new f(p.$ele,i,c,p.refs,p)}var l=void 0,v={};"object"==("undefined"==typeof c?"undefined":_typeof(c))?(l=d.createClass({render:function(){return i}.bind(c)}),v=c):(v={render:function(){return i}},l=d.createClass(v));var m={list:[]},b=y(l,i.props,m,c,i);a.empty().append(b.$ele);for(var h=m.list.length-1;h>=0;h--)m.list[h]();return new f(b.$ele,i,v,b.refs,b)}};t.Scope=d}(jQuery,window);